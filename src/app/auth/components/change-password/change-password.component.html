<section>
  <article class="d-flex flex-column gap-5">
    <h2>Change Password</h2>

    <!-- Verification form -->
    <form [formGroup]="changePasswordForm" (ngSubmit)="onChange(changePasswordForm)">
      <div class="row g-3">

        <!-- Password -->
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label for="changePasswordInput">Password</mat-label>
            <input matInput id="changePasswordInput" [type]="hide ? 'password' : 'text'" formControlName="oldPassword"
              placeholder="Enter Your oldPassword">
            <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide">
              <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <!-- Error message for password field -->
            <mat-error *ngIf="changePasswordForm.get('oldPassword')?.touched && changePasswordForm.get('oldPassword')?.invalid">
              Required and must be 8-16 characters long with uppercase, lowercase, digit, and special character.
            </mat-error>
          </mat-form-field>
        </div>

        <!-- new Password -->
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label for="newPassword">new Password</mat-label>
            <input matInput id="newPassword" [type]="hide ? 'password' : 'text'" formControlName="newPassword"
              placeholder="Enter Your new Password">
            <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide">
              <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <!-- Error message for password field -->
            <mat-error *ngIf="changePasswordForm.get('newPassword')?.touched && changePasswordForm.get('newPassword')?.invalid">
              Required and must be 8-16 characters long with uppercase, lowercase, digit, and special character.
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Confirm new Password -->
        <div class="col-12">
          <mat-form-field class="w-100">
            <mat-label for="confirmNewPassword">Confirm Password</mat-label>
            <input matInput id="confirmNewPassword" [type]="hideTwo ? 'password' : 'text'" formControlName="confirmNewPassword"
              placeholder="Confirm New Password">
            <button type="button" mat-icon-button matSuffix (click)="hideTwo = !hideTwo"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideTwo">
              <mat-icon>{{hideTwo ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <!-- Error message for confirm password field -->
            <mat-error
              *ngIf="changePasswordForm.get('confirmNewPassword')?.touched && changePasswordForm.get('confirmNewPassword')?.invalid">
              Required.
            </mat-error>
            <!-- Error message if passwords do not match -->
            <mat-error
              *ngIf="changePasswordForm.hasError('passwordMisMatch') && (changePasswordForm.get('confirmNewPassword')?.touched)">
              Passwords do not match.
            </mat-error>
          </mat-form-field>
        </div>

        <button class="primary mt-3">Change Password</button>
      </div>
    </form>
  </article>
</section>
